# Candidate Questions graphic

This graphic processes Google Form Q&A formats into a clickable graphic for school boards, mayoral elections, etc. 

## Labels and sheets

The Google Sheets template contains five tabs:
- `Form Responses`
- `candidates`
- `questions`
- `bio`
- `labels`

`Form Responses` is the best place to copy-paste raw form results in. 

`candidates` contains some pre-filled shorthands that are required for the graphic to work. *Do not remove* `short`, `responded`, `incumbent`, or `photo`. If you change existing labels like `party` and `party_short` you will have to update the graphic code; however, the code will generally function with or without most fields.

*Key fields*
* If you want to display a candidate, you must write something in the `responded` field. A candidate without any information in this field will not be clickable or interactable. If you want a non-responsive candidate to be excluded from the graphic, delete them from the `candidates` tab entirely.
* Each candidate must have a `short` name. Their last name, all lowercase, usually suffices.
* Write something in the `incumbent` field to add incumbent styling.
* If the candidate provided a headshot, the `photo` field will match to the file of the corresponding name in the `/assets` folder. The filename must match exactly.

This sheet also uses `_` as a prefix to indicate that a field should be ignored. 

You will need to relabel your candidate questions with shorthand codes that match the labels in the `questions` tab.

`questions` contains a short-hand descriptor for each question, the full question text, and a `reader` flag that should be used to mark reader-submitted questions.

`bio` contains biographical information like `age`, `occupation`, and `workplace`. This information is optional and will pull from the corresponding short label in the `candidates` sheet. 

`labels` contains standard `credit` fields for graphics, as well as a `noresponse` flag for questions that went unanswered by a candidate who otherwise responded to the rest of the form.

## Image Preparation

There are two image options:
* No image
* Square or rectangular image with a head on center

If your images are wide and horizontal, have candidates' heads off center, or are particularly tall or zoomed out, they will likely not auto-crop well. It's best to crop a high-resolution image into a square with the candidate's face on-center.

To resize images for optimal web use, run the following [imagemagick](https://legacy.imagemagick.org/Usage/resize/) command in bash:

`mkdir -p resized; for jpg in *.jpg; do convert $jpg -quality 70 -resize 200x\> resized/$jpg; done`

Then move resized `.jpg` images into the `/assets` folder within the graphics-js repo for the individual graphic.

## Newsroom workflow

You can manually change the Google Sheet in `manifest.json` to refer to the Sheet auto-generated by the Google Form instead of the Sheet auto-generated by dailygraphics-next.

However, it may be most efficient to just drop the Google Form response into the pre-generated spreadsheet, because you'll have to manually edit the shorthand question titles regardless.

Additionally, if the individual who created the Google Form leaves the organization, it may be difficult to locate the historical sheet later. So if you do re-map the manifest, make sure to add the replacement sheet to the `Dailygraphics Project Sheets` folder on Google Drive.